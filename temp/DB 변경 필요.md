---
title: DB 변경 필요
created: 2025-06-13 03:02
alias:
tags:
---
#### 입항예정정보.xlsx 관련
TB_PORT_ENTRY(입항예정정보) 테이블에 컬럼 추가
'VESSEL_ID' : 원료배선지시ID 키값. VARCHAR

입항예정정보 MES에서 광종 타입 올라오나 확인 필요
AI팀에서 장재석 이사님이 보내주신 XLSX 파일에는 광종타입 정보 제공.
홀드정보 테이블 없이 되어야 하는게 맞으면 광종타입 따로 올라오는게 맞음. 현재 우리 DB에는 광종타입 컬럼이 없어서 못 넣었다.
이걸 바탕으로 BRAND_UNLOAD 테이블에서 광종명이 없을 때 광종타입이랑 N_확장자_선적국가 이렇게 해서 찾을 수 있다.


20개 컬럼 추가 
선박에 실린 브랜드명과 그 브랜드의 선적량 합계
브랜드1~10 : 브랜드명 (10개) VARCHAR
선적량1~10 : 선적량 (10개) INT

하나의 선박에 브랜들를 최대 6개 정도 실은 경우 있음.
여유있게 브랜드 10개 까지 커버할 수 있도록

#### 선석배정변수정의.xlsx 관련
양하항 별로 턴타임 값(hour)
광양선     | 12
포항선     | 24
광양단독    | 18

선박 계약타입 별로 텐더타임 값(hour)
S   | 36
D   | 00
P   | 00
C   | 36
V   | 00

?? T | ?? 일단 V와 마찬가지로 00 넣자.

광양선:12;포항선:24;광양단독:18;S:36;D:00;P:00;C:36;V:00;

선박 출항 후 다음 선박 접안 사이 시간 변수 EX) 1시간
선박 작업 완료 후 출항까지 사이 시간 변수. EX) 30분
선석배정에 필요한 기본 사항 변수 값들을 변경할 수 있는 화면, DB 필요.

'TB_COM_SETUP'에 추가해서 쓸 수 있을듯. 테이블 변경 불필요

###### Laytime 개시 시간 Laytime 종료 시간 계산방법

Laytime 개시 시간 = 입항예정시간 + turn time + tender time

각 선박의 입항예정시간을 기준으로, 
선박 계약 등에 따른 turn time 및 tender time을 더하여 계산.
TENDER_TIME이 계약 관련 값. 
입항예정정보에서 양하항(UNLOAD_PORT), 계약타입(SH_GUBUN)을 참고해서 해당하는 턴타임, 텐더타임 값을 설정에서 참고해서 받아서 계산하도록 한다.

Laytime 종료 시간 = Laytime 개시 시간 + 허용시간(선적량 / 기준하역률)

계산한 Laytime 개시 시간을 기준으로 , 총 작업량과 계약 하역률을 이용하여 Laytime 종료 시간을 계산.


#### 하역기하역기준율.xlsx 관련
TB_COM_UNLOAD 테이블에
하역기준율 관련 컬럼 추가
타입 INT

MW_TH_RATE

