---
title: IMU 센서
created: 2025-01-24 11:23
alias:
tags:
---
## **IMU 센서란?**

**IMU(Inertial Measurement Unit)**는 물체의 **이동 및 회전 정보를 측정**하는 센서입니다.  
RC카, 드론, 로봇, 자율주행차 등 다양한 시스템에서 **자세(Orientation)와 움직임(Motion)를 파악**하는 데 사용됩니다.

IMU는 보통 **가속도(Accelerometer), 각속도(Gyroscope), 지자기 센서(Magnetometer)를 포함**합니다.

---

## **IMU의 구성 요소 및 기능**

1. **가속도 센서(Accelerometer)**
    
    - 물체가 받는 **가속도(중력 포함)**를 측정하는 장치입니다.
    - 단위: m/s² 또는 g(중력 가속도, 9.8m/s²)
    - **측정 축:** X, Y, Z (3축)
    - **기능:**
        - 이동 방향 및 속도 측정
        - 물체의 기울기 감지 (정적 상태에서 중력을 기준으로 각도 계산 가능)
        - 흔들림 및 충격 감지
2. **자이로스코프(Gyroscope)**
    
    - 물체의 **각속도(회전 속도)**를 측정합니다.
    - 단위: rad/s (라디안/초) 또는 °/s (도/초)
    - **측정 축:** X, Y, Z (3축)
    - **기능:**
        - 회전 속도 측정(예: 드론의 회전)
        - 방향 변화 감지
        - Roll, Pitch, Yaw 각도 추적
3. **지자기 센서(Magnetometer)**
    
    - 지구의 자기장을 이용해 **방향(나침반 기능)**을 측정합니다.
    - 단위: µT(마이크로 테슬라)
    - **측정 축:** X, Y, Z (3축)
    - **기능:**
        - 절대적인 방향(Heading) 확인
        - 자기장 왜곡 보정
        - GPS 없는 환경에서 보조 위치 추정 가능

---

## **IMU의 오차와 보정 방법**

IMU는 측정 과정에서 다음과 같은 오차가 발생할 수 있습니다.

1. **가속도 센서 오차**
    
    - 중력의 영향으로 가속도 값에 편차 발생
    - 진동(노이즈)으로 인한 불안정한 측정
2. **자이로스코프 오차**
    
    - **드리프트(Drift):** 장시간 사용할 때 작은 오차가 누적되어 큰 편차 발생
    - 외부 충격 및 환경 변화로 오차 증가
3. **지자기 센서 오차**
    
    - 금속물체, 전자기장에 의해 왜곡 가능

**오차 보상 방법:**

- **센서 퓨전(Sensor Fusion):** 여러 센서 데이터를 결합해 정확도를 높이는 방법
    - 가속도 센서 + 자이로스코프 → 자세 추정 (Kalman Filter, Complementary Filter)
    - 지자기 센서 → 방향 보정 (North Calibration)
    - 온도 센서 추가 → 온도 변화에 따른 오차 보정

---

## **Roll, Pitch, Yaw 구하기**

IMU를 사용하여 물체의 **3축 회전(Roll, Pitch, Yaw)**을 측정할 수 있습니다.

1. **좌표축 정의:**
    - **Roll (롤):** X축을 기준으로 좌우로 기울어지는 각도 (비행기의 날개 기울기)
    - **Pitch (피치):** Y축을 기준으로 앞뒤로 기울어지는 각도 (비행기의 기수 기울기)
    - **Yaw (요):** Z축을 기준으로 좌우 회전 (자동차가 방향을 바꾸는 것)

**IMU의 데이터로 Roll, Pitch, Yaw를 계산하는 방법:**

### **1) 가속도 센서 기반 계산 (정적 상태일 때 정확)**

가속도 센서를 통해 중력을 기준으로 각도를 추출합니다.
![[../../noGitSync/Attachments/Pasted image 20250124115056.png]]
- **Roll (X축 회전):**
Roll=tan⁡−1(ayaz)Roll = \tan^{-1} \left(\frac{a_y}{a_z}\right)

- **Pitch (Y축 회전):**
    
    Pitch=tan⁡−1(−axay2+az2)Pitch = \tan^{-1} \left(\frac{-a_x}{\sqrt{a_y^2 + a_z^2}}\right)

Yaw는 가속도 센서만으로 계산이 어렵기 때문에 지자기 센서를 사용해야 합니다.

---

### **2) 자이로스코프 기반 계산 (동적 상태일 때 유용)**

자이로스코프는 실시간으로 회전 속도를 제공하며, 시간에 따라 적분하여 각도를 추정합니다.
![[../../noGitSync/Attachments/Pasted image 20250124115105.png]]
- Roll, Pitch, Yaw의 변화율: 
  Roll=Rollprev+ωx⋅dtRoll = Roll_{prev} + \omega_x \cdot dt 
  Pitch=Pitchprev+ωy⋅dtPitch = Pitch_{prev} + \omega_y \cdot dt 
  Yaw=Yawprev+ωz⋅dtYaw = Yaw_{prev} + \omega_z \cdot dt

**문제점:**

- 시간에 따라 누적 오차(드리프트)가 발생할 수 있음 → 가속도 센서로 보정 필요.

---

### **3) 지자기 센서 기반 Yaw 보정**

Yaw(방향)은 자이로스코프에서 오차가 누적될 수 있으므로 **지자기 센서**를 사용하여 보정합니다.

- **Yaw(방위각) 계산 공식:** 
  ![[../../noGitSync/Attachments/Pasted image 20250124115142.png]]
- Yaw=tan⁡−1(mymx)Yaw = \tan^{-1} \left(\frac{m_y}{m_x}\right)

**지자기 센서 보정 작업:**

- 환경의 자기장 간섭을 줄이기 위해 초기 보정(칼리브레이션) 필요.
- 8자 모양(∞)으로 움직이며 센서 교정 수행.

---

## **센서 퓨전을 통한 최적의 Roll, Pitch, Yaw 계산**

단일 센서만 사용하면 오차가 크므로 여러 센서를 조합하여 **센서 퓨전(Sensor Fusion)**을 사용합니다.

### **보편적인 센서 융합 방법:**

1. **보완 필터(Complementary Filter):**
    
    - 저주파에서는 가속도 센서 신뢰(정확)
    - 고주파에서는 자이로스코프 신뢰(빠른 응답)
    - 장점: 구현이 쉬움, 실시간 적용 가능
2. **칼만 필터(Kalman Filter):**
    
    - 센서의 잡음을 줄이고 예측과 측정을 조합해 최적화된 결과 도출
    - 장점: 노이즈에 강함, 정확도 우수
    - 단점: 복잡한 수학적 연산 필요
3. **마들린 필터(Madgwick Filter):**
    
    - 보완 필터와 유사하지만 계산량이 적고 빠름
    - 드론, 로봇, RC카 등에서 많이 사용됨

---

## **IMU를 이용한 프로젝트 예제**

1. **RC카의 자세 제어:**
    
    - Roll, Pitch, Yaw 데이터를 기반으로 주행 안정성 유지.
    - LiDAR 및 카메라와 조합하여 정밀한 맵핑 수행.
2. **드론의 비행 안정화:**
    
    - 자이로스코프 기반 빠른 자세 조정
    - 가속도 센서로 정확한 이동 감지
3. **증강 현실(AR):**
    
    - 스마트폰에서 기기의 방향 및 위치 추적



