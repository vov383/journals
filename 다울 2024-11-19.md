---
title: 다울 2024-11-19
created: 2024-11-19 08:12
aliases: 
tags: [다울일간노트]
---
- [x] 나스 솔루션 link, source 백업하기 ✅ 2024-11-19
Yesterday: [[다울 2024-11-18]]
Tomorrow: [[다울 2024-11-20]]


## 오늘 작업 목표




## Not done yet

```dataviewjs

dv.taskList(dv.pages('-"3. Resource/Templates"').file.tasks

.where(t => !t.completed && !t.text.includes("@frank") &&

!t.text.includes("#task")

))

```

---

## 배운 것




## 정리가 필요한 메모는 아래에


```SQL


WITH ShipKeyCTE AS ( 
   SELECT 
       SH_CD 
       , SH_YEAR 
       , SH_CHASU 
       , CONCAT(SH_CD, '/', SH_YEAR, '/', COALESCE(SH_CHASU, '')) AS SHIP_KEY 
       , MAKE_TYPE 
       , CASE 
           WHEN DECISION = 1 THEN "TB_DOCK_ORDER2" 
           ELSE NULL 
       END AS FROM_TABLE 
   FROM TB_DOCK_ORDER2 
   WHERE ( 
       (STR_TO_DATE(DT_START, '%Y%m%d') <= '20241104' 
           AND STR_TO_DATE(DT_END, '%Y%m%d') BETWEEN '20241104' AND '20241202') 
       OR (STR_TO_DATE(DT_START, '%Y%m%d') <= '20241104' AND STR_TO_DATE(DT_END, '%Y%m%d') >= '20241202') 
       OR (STR_TO_DATE(DT_START, '%Y%m%d') BETWEEN '20241104' AND '20241202' 
           AND STR_TO_DATE(DT_END, '%Y%m%d') <= '20241202') 
       OR (STR_TO_DATE(DT_START, '%Y%m%d') BETWEEN '20241104' AND '20241202' 
           AND STR_TO_DATE(DT_END, '%Y%m%d') >= '20241202')  
       OR ( DT_START2 <= 20241104 
           AND DT_END2 BETWEEN 20241104 AND 20241202 ) 
       OR ( DT_START2 <= 20241104 
           AND DT_END2 >= 20241202 ) 
       OR ( DT_START2 BETWEEN 20241104 AND 20241202 
           AND DT_END2 <= 20241202 ) 
       OR ( DT_START2 BETWEEN 20241104 AND 20241202 
           AND DT_END2 >= 20241202 ) 
   ) 
 AND DECISION = '1' 
 UNION ALL 
   SELECT 
       SH_CD 
       , SH_YEAR 
       , SH_CHASU 
       , CONCAT(SH_CD, '/', SH_YEAR, '/', COALESCE(SH_CHASU, '')) AS SHIP_KEY 
       , MAKE_TYPE 
       , "TB_DOCK_ORDER2" AS FROM_TABLE 
   FROM TB_DOCK_PLAN2 
   WHERE ( 
       (STR_TO_DATE(DT_START, '%Y%m%d') <= '20241104' 
           AND STR_TO_DATE(DT_END, '%Y%m%d') BETWEEN '20241104' AND '20241202') 
       OR (STR_TO_DATE(DT_START, '%Y%m%d') <= '20241104' AND STR_TO_DATE(DT_END, '%Y%m%d') >= '20241202') 
       OR (STR_TO_DATE(DT_START, '%Y%m%d') BETWEEN '20241104' AND '20241202' 
           AND STR_TO_DATE(DT_END, '%Y%m%d') <= '20241202') 
       OR (STR_TO_DATE(DT_START, '%Y%m%d') BETWEEN '20241104' AND '20241202' 
           AND STR_TO_DATE(DT_END, '%Y%m%d') >= '20241202')  
       OR ( DT_START2 <= 20241104 
           AND DT_END2 BETWEEN 20241104 AND 20241202 ) 
       OR ( DT_START2 <= 20241104 
           AND DT_END2 >= 20241202 ) 
       OR ( DT_START2 BETWEEN 20241104 AND 20241202 
           AND DT_END2 <= 20241202 ) 
       OR ( DT_START2 BETWEEN 20241104 AND 20241202 
           AND DT_END2 >= 20241202 ) 
   ) 
) 
SELECT 
   A.SH_CD 
 , A.SH_NM 
 , A.SH_YEAR 
 , A.SH_CHASU 
 , A.SH_HOLD 
 , A.BR_CD 
 , A.BR_NM 
 , A.SH_TW 
 , A.DT_PLAN_ENTRY 
 , A.SH_GUBUN 
 , A.ITEM_CODE 
 , A.DRAFT 
 , A.LOA 
 , A.SH_COMPANY 
 , A.UNLOAD_PORT 
 , A.UL_STATUS 
 , A.LOAD_DATE 
 , A.LOAD_PORT 
 , A.LOAD_COUNTRY 
 , A.RATE_CONTRACT 
 , A.RATE_UNLOAD 
 , A.RATE_DISPATCH 
 , A.RATE_DEMURRAGE 
 , A.TURN_TIME 
 , A.UL_EMG 
 , A.DW_HOUR 
 , A.MONEY_EXCHANGE 
 , A.MONEY_CODE 
 , A.VENDOR_ITEM1 
 , A.SUPPLIER_ITEM_POH_QTY1 
 , A.SUPPLIER_ITEM_KWA_QTY1 
 , A.RMAT_SHIP_DEPT_PORT_DT1 
 , A.RAW_LPORT_ID1 
 , A.PO_NUM1 
 , A.PO_LINE_NUM1 
 , A.PO_RELEASE_NUM1 
 , A.PO_SHIPMENT_NUM1 
 , A.PO_PARTIAL_NUM1 
 , A.VENDOR_ITEM2 
 , A.SUPPLIER_ITEM_POH_QTY2 
 , A.SUPPLIER_ITEM_KWA_QTY2 
 , A.RMAT_SHIP_DEPT_PORT_DT2 
 , A.RAW_LPORT_ID2 
 , A.PO_NUM2 
 , A.PO_LINE_NUM2 
 , A.PO_RELEASE_NUM2 
 , A.PO_SHIPMENT_NUM2 
 , A.PO_PARTIAL_NUM2 
 , A.VENDOR_ITEM3 
 , A.SUPPLIER_ITEM_POH_QTY3 
 , A.SUPPLIER_ITEM_KWA_QTY3 
 , A.RMAT_SHIP_DEPT_PORT_DT3 
 , A.RAW_LPORT_ID3 
 , A.PO_NUM3 
 , A.PO_LINE_NUM3 
 , A.PO_RELEASE_NUM3 
 , A.PO_SHIPMENT_NUM3 
 , A.PO_PARTIAL_NUM3 
 , A.VENDOR_ITEM4 
 , A.SUPPLIER_ITEM_POH_QTY4 
 , A.SUPPLIER_ITEM_KWA_QTY4 
 , A.RMAT_SHIP_DEPT_PORT_DT4 
 , A.RAW_LPORT_ID4 
 , A.PO_NUM4 
 , A.PO_LINE_NUM4 
 , A.PO_RELEASE_NUM4 
 , A.PO_SHIPMENT_NUM4 
 , A.PO_PARTIAL_NUM4 
 , A.VENDOR_ITEM5 
 , A.SUPPLIER_ITEM_POH_QTY5 
 , A.SUPPLIER_ITEM_KWA_QTY5 
 , A.RMAT_SHIP_DEPT_PORT_DT5 
 , A.RAW_LPORT_ID5 
 , A.PO_NUM5 
 , A.PO_LINE_NUM5 
 , A.PO_RELEASE_NUM5 
 , A.PO_SHIPMENT_NUM5 
 , A.PO_PARTIAL_NUM5 
 , A.DT_INSERT 
 , A.DT_UPDATE 
 , A.BRAND_TYPE 
 , A.RMAT_SHIP_SLNG_DT 
 , A.SHIP_SLNG_TP_CD 
 , A.HELI_TP_CD 
 , A.LUL_SAT_DT 
 , A.LUL_DN_DT 
 , A.BERTH_DELAY 
 , B.SHIP_KEY
 , IF(ISNULL(B.SHIP_KEY), 0, 1) AS COLOR_FLAG 
 , B.MAKE_TYPE 
 , B.FROM_TABLE 
 FROM TB_PORT_ENTRY AS A 
 LEFT OUTER JOIN 
   ShipKeyCTE AS B 
 ON CONCAT(A.SH_CD, '/', A.SH_YEAR, '/', COALESCE(A.SH_CHASU, '')) = B.SHIP_KEY 
 Where 1 = 1 
 AND DT_PLAN_ENTRY BETWEEN '2024-11-18 00:00:00' AND '2024-12-02 23:59:59' 
 AND SH_NM LIKE '%%' 
 AND BR_NM LIKE '%%' 
 ORDER BY DT_PLAN_ENTRY, SH_NM
;
```
