---
title: 다울 2024-07-30
created: 2024-07-30 07:59
aliases: 
tags: [다울일간노트]
---
- [x] 나스 솔루션 link, source 백업하기 ✅ 2024-07-30
Yesterday: [[다울 2024-07-29]]
Tomorrow: [[다울 2024-07-31]]

### Wiseman says,
> Peace begins with a smile.
> — <cite>Mother Teresa</cite>


## 오늘 작업 목표
- [x] 루트 확인 버튼컬럼 ✅ 2024-08-20
- [x] 기존 화면 현황정보 이미지 올려놓고 가기. STAGE PAINT ✅ 2024-08-12
- [x] 화면 ui 변경 ✅ 2024-08-12
	- [x] 데이터 표시 ✅ 2024-08-12
- [x] 현황 데이터와 계획 중 오늘 일자 비교 ✅ 2024-08-12


## 배운 것

### MYSQL 조인에 따른 결과 레코드 수 변화

주석 처리한 조인 조건 때문에 쿼리 결과의 레코드 수가 달라지는 이유를 이해하기 위해, SQL 조인의 특성과 NULL 처리 방식을 이해하는 것이 중요합니다.

#### 조인 조건

**조인 조건 설명**
각 조인 조건은 데이터셋을 더 제한합니다. 조건을 주석 처리하면 제한이 줄어들어 더 많은 레코드가 포함될 수 있습니다.

**예시**
`AND uw.BR_NM = h.BR_NM` 조건을 주석 처리하면 `SHIP_KEY`와 `BR_CD`는 일치하지만 `BR_NM`은 일치하지 않는 행도 포함됩니다.

#### 조인의 종류

**INNER JOIN**
`INNER JOIN`은 두 테이블 모두에서 일치하는 행이 있을 때만 반환합니다. 조건을 주석 처리하면 조인이 덜 제한적이 되어 더 많은 행을 포함할 수 있습니다.

**LEFT JOIN**
`LEFT JOIN`은 왼쪽 테이블의 모든 행과 오른쪽 테이블의 일치하는 행을 반환합니다. 일치하는 행이 없으면 오른쪽 테이블에서 NULL이 반환됩니다. 여기서 조건을 주석 처리하면 오른쪽 테이블의 값이 NULL이 아닌 행이 더 많아질 수 있습니다.

#### 조건 주석 처리의 영향

**더 많은 행 포함**
조건을 주석 처리하면 더 적은 기준으로 인해 더 많은 행이 포함될 수 있습니다. 결과적으로 반환되는 행 수가 증가할 수 있습니다.

**쿼리 내 특정 예시**
- `AND uw.BR_NM = h.BR_NM` 조건을 주석 처리하면 `SHIP_KEY`와 `BR_CD`는 일치하지만 `BR_NM`은 일치하지 않는 행도 포함될 수 있습니다.
- 동일한 논리가 `AND uw.BR_CD = uo.BR_CD`와 같은 다른 주석 처리된 조건에도 적용됩니다.

### 분석 단계

#### 1단계: 조인과 조건 식별
각 조인과 조건을 검토하여 비즈니스 로직에 필수적인 조건을 이해합니다.

#### 2단계: 개별 테스트
각 조건을 하나씩 주석 처리하고 결과 레코드 수 변화를 관찰합니다.

#### 3단계: 결과 집합 분석
조건을 주석 처리했을 때 반환되는 데이터를 확인하여, 해당 행이 실제로 필요한 데이터인지 확인합니다.

#### 4단계: 조건 정제
분석을 바탕으로 필요한 레코드만 반환되도록 조건을 정제합니다.

### 예시 수정

주석 처리 전후의 쿼리 섹션이 어떻게 달라지는지 예시로 설명합니다:

```sql
LEFT JOIN
    ULORDER_INFO uo ON uw.SHIP_KEY = uo.SHIP_KEY
     AND uw.BR_CD = uo.BR_CD
  --  AND uw.BR_NM = uo.BR_NM
```

`BR_NM` 조건을 주석 처리하면 `ULORDER_INFO`의 더 많은 행이 `ULWORK_INFO`와 조인되어 결과적으로 더 많은 레코드가 반환됩니다.

#### 결론

조인 조건이 결과 집합에 미치는 영향을 이해하면 데이터를 효과적으로 조작할 수 있습니다. 조건을 주석 처리하면 제한이 줄어들어 데이터셋이 확장됩니다.

#### 요약

h6 조인 조건은 데이터를 제한
조건은 결과 집합을 좁힙니다.

h6 주석 처리의 영향
조건을 주석 처리하면 결과 집합이 확장됩니다.

h6 INNER JOIN과 LEFT JOIN
다른 조인 유형은 행과 NULL을 다르게 처리합니다.

h6 조건 테스트
조건을 개별적으로 주석 처리하여 영향을 분석합니다.

h6 조건 정제
필요한 조건을 적용하여 원하는 데이터셋을 반환합니다.

h6 예시 효과
`AND uw.BR_NM = uo.BR_NM` 주석 처리는 더 많은 행을 포함시킵니다.

h6 결과 분석
영향을 분석하여 조건을 정제하고 올바른 데이터를 확보합니다.

Q1: 주석 처리한 조인 조건이 데이터셋에 미치는 영향을 더 분석하는 방법은 무엇입니까?
Q2: SQL 쿼리에서 필요한 레코드만 반환되도록 하기 위한 전략은 무엇입니까?


### SQL 쿼리에서 필요한 레코드만 반환되도록 하기 위한 전략

#### 필터링 조건 사용
쿼리에서 WHERE 절을 사용하여 필요한 조건을 명확하게 지정합니다. 조건을 추가하면 데이터베이스는 불필요한 레코드를 제외하고 필요한 레코드만 반환합니다.

```sql
SELECT * FROM 테이블명 WHERE 조건;
```

#### DISTINCT 사용
중복 레코드를 제거하려면 DISTINCT 키워드를 사용합니다. 이는 반환된 레코드에서 중복된 항목을 제거하여 고유한 레코드만 반환합니다.

```sql
SELECT DISTINCT 컬럼명 FROM 테이블명;
```

#### LIMIT 사용
결과 집합의 크기를 제한하려면 LIMIT 키워드를 사용합니다. 예를 들어, 10개의 레코드만 반환하도록 제한할 수 있습니다.

```sql
SELECT * FROM 테이블명 LIMIT 10;
```

#### 필요한 컬럼만 선택
모든 컬럼을 선택하는 대신 필요한 컬럼만 선택하여 성능을 향상시키고 불필요한 데이터 반환을 피합니다.

```sql
SELECT 컬럼1, 컬럼2 FROM 테이블명;
```

#### 인덱스 활용
인덱스를 사용하면 검색 속도가 빨라지고 성능이 향상됩니다. 적절한 인덱스를 사용하여 쿼리 성능을 최적화합니다.

```sql
CREATE INDEX 인덱스명 ON 테이블명(컬럼명);
```

#### 조인 최적화
조인을 사용할 때는 조인 조건을 신중하게 선택하고, 필요하지 않은 조인을 피하여 성능을 최적화합니다.

```sql
SELECT A.*, B.*
FROM 테이블A A
JOIN 테이블B B ON A.조건 = B.조건;
```

#### 서브쿼리와 서브셋 활용
서브쿼리와 서브셋을 사용하여 더 작은 데이터 집합을 만들고, 필요한 데이터만 반환하도록 쿼리를 설계합니다.

```sql
SELECT * FROM 테이블명 WHERE 컬럼명 IN (SELECT 서브쿼리);
```



### 정규화된 테이블을 이용한 다른 복잡한 조인 사례

#### 예시 1: 교차 조인 (Cross Join)
두 테이블의 모든 가능한 조합을 반환합니다. 주로 두 테이블의 모든 조합을 만들어야 할 때 사용됩니다.

```sql
SELECT A.*, B.*
FROM 테이블A A
CROSS JOIN 테이블B B;
```

#### 예시 2: 서브쿼리와 결합한 조인
서브쿼리를 사용하여 복잡한 조건을 처리하고, 그 결과를 다시 조인합니다.

```sql
WITH 서브쿼리 AS (
    SELECT 컬럼1, 컬럼2 FROM 테이블명 WHERE 조건
)
SELECT A.*, B.*
FROM 테이블A A
JOIN 서브쿼리 B ON A.조건 = B.조건;
```

#### 예시 3: 셀프 조인 (Self Join)
같은 테이블의 서로 다른 행을 조인하여 연관 데이터를 비교합니다.

```sql
SELECT A.*, B.*
FROM 테이블명 A
JOIN 테이블명 B ON A.조건 = B.조건;
```

#### 예시 4: 복합 조건 조인
여러 조건을 사용하여 두 테이블을 조인합니다. 이는 복잡한 비즈니스 로직을 구현할 때 유용합니다.

```sql
SELECT A.*, B.*
FROM 테이블A A
JOIN 테이블B B ON A.조건1 = B.조건1 AND A.조건2 = B.조건2;
```

### 요약

h6 필터링 조건 사용
WHERE 절을 사용하여 필요한 조건을 지정합니다.

h6 DISTINCT 사용
중복된 레코드를 제거하여 고유한 레코드만 반환합니다.

h6 LIMIT 사용
결과 집합의 크기를 제한합니다.

h6 필요한 컬럼만 선택
필요한 컬럼만 선택하여 성능을 향상시킵니다.

h6 인덱스 활용
적절한 인덱스를 사용하여 검색 속도를 높입니다.

h6 조인 최적화
신중하게 조인 조건을 선택하고 필요 없는 조인을 피합니다.

h6 서브쿼리와 서브셋 활용
서브쿼리와 서브셋을 사용하여 필요한 데이터만 반환합니다.

Q1: 서브쿼리를 활용한 복잡한 조인의 사례는 무엇입니까?
Q2: 인덱스를 사용하여 쿼리 성능을 어떻게 최적화할 수 있을까요?


## 정리가 필요한 메모는 아래에





## Not done yet

```dataviewjs

dv.taskList(dv.pages('-"3. Resource/Templates"').file.tasks

.where(t => !t.completed && !t.text.includes("@frank") &&

!t.text.includes("#task")

))

```
